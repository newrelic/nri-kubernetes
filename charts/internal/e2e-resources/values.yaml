pending:
  # -- Enable crashing and pending pods
  enabled: true

cronjob:
  # -- Deploy a dummy cronjob
  enabled: true

failingJob:
  # -- Deploy a failing job
  enabled: true

daemonSet:
  # -- Deploy a dummy daemonSet
  enabled: true

statefulSet:
  # -- Deploy a dummy statefulSet
  enabled: true
  podSecurityContext:
    runAsUser: 0
    fsGroup: 0
  containerSecurityContext: {}

deployment:
  # -- Deploy a dummy deployment
  enabled: true

hpa:
  # -- Enable hpa resources
  enabled: true

persistentVolume:
  # -- Create PVs
  enabled: true
  # -- hostPath for the PersistentVolume (default: /mnt/, for OpenShift use: /var/tmp/e2e-storage)
  hostPath: "/var/tmp/e2e-storage"
  # -- Changes PV type to run on multi-node clusters (e.g. GKE, OpenShift on GCP)
  multiNode: false
persistentVolumeClaim:
  # -- Create PVCs
  enabled: true

loadBalancerService:
  # -- Deploy a loadBalancer service
  enabled: true
  annotations: {}
  # -- If set, will deploy service with a loadBalancerIP set to this value
  fakeIP: ""

scraper:
  # -- Deploy the scraper pod
  enabled: false

demo:
  # -- Deploy in demo mode.
  # Make entities consume non-negligible resources so metrics can be easily observed in the dashboards.
  # This setting only applies to resources that would negatively impact testing times if enabled by default
  enabled: false

# -- Variables for filesystem testing
fileSystemTest:
  fileName: 'pi.txt'

# Changes resource yaml files for running on OpenShift & MiniShift
# OpenShift currently only runs on in demo mode
openShift:
  enabled: false

# Enables running various resources on Windows nodes
# Only runs in demo mode
windows:
# -- Deploy resources on Windows Server 2019 nodes
  is2019: false
# -- Deploy resources on Windows Server 2022 nodes
  is2022: false

karpenterNodePool:
  # -- Deploy a Karpenter NodePool CRD for testing CRD monitoring
  enabled: true

kube-state-metrics:
  podSecurityContext: {}
  securityContext:
    enabled: false
  metricLabelsAllowlist:
    - resourcequotas=[environment,team]
    - namespaces=[environment,team]
    - deployments=[environment,team]
    - pods=[environment,team]
  metricAnnotationsAllowList:
    - resourcequotas=[owner,description]
    - namespaces=[owner,description]
    - deployments=[owner,description]
    - pods=[owner,description]
  customResourceState:
    enabled: true
    config:
      kind: CustomResourceStateMetrics
      spec:
        resources:
          - groupVersionKind:
              group: karpenter.sh
              version: v1beta1
              kind: NodePool
            labelsFromPath:
              name: [metadata, name]
              # Inherit all labels from metadata
              "*": [metadata, labels]
            metrics:
              - name: "nodepool_consolidation_policy"
                help: "Consolidation policy setting"
                each:
                  type: StateSet
                  stateSet:
                    labelName: policy
                    path: [spec, disruption, consolidationPolicy]
                    list:
                      - "WhenEmpty"
                      - "WhenUnderutilized"
              - name: "nodepool_limit_cpu"
                help: "CPU limit for the NodePool"
                each:
                  type: Gauge
                  gauge:
                    path: [spec, limits, cpu]
              - name: "nodepool_limit_memory"
                help: "Memory limit for the NodePool"
                each:
                  type: Gauge
                  gauge:
                    path: [spec, limits, memory]
              - name: "nodepool_nodes_count"
                help: "Number of nodes managed by this NodePool"
                each:
                  type: Gauge
                  gauge:
                    path: [status, resources, nodes]
              - name: "nodepool_pods_count"
                help: "Number of pods on nodes from this NodePool"
                each:
                  type: Gauge
                  gauge:
                    path: [status, resources, pods]
              - name: "nodepool_conditions"
                help: "NodePool conditions"
                each:
                  type: Info
                  info:
                    labelsFromPath:
                      type: [type]
                      status: [status]
                    path: [status, conditions]
